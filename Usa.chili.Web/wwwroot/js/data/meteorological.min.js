const App=new Vue({el:"#app",data:function(){return{stations:[],model:{stationId:Core.DEFAULT_STATION,beginDate:moment().format(Core.DATE_FORMAT),endDate:moment().format(Core.DATE_FORMAT),downloadFormat:1,selectedVariables:[]},variables:[],formatOptions:[{id:1,text:"CSV"},{id:2,text:"Fixed"}],selectAllVariables:!1,error:null,isLoading:!1}},created:function(){Core.populateStationDropdown(this,!1);this.getVariables()},methods:{getVariables:function(){const n=this;axios.get("/json/variables.json").then(function(t){n.variables=t.data}).catch(function(n){console.log("getVariables failed",n)})},selectAll:function(){const n=this;n.model.selectedVariables=[];n.selectAllVariables&&n.variables.forEach(function(t){n.model.selectedVariables.push(t.name)})},selectOne:function(){this.model.selectedVariables&&this.model.selectedVariables.length>0&&this.model.selectedVariables.length!=this.variables.length?$("#selectAll").prop("indeterminate",!0):this.model.selectedVariables&&this.model.selectedVariables.length>0&&this.model.selectedVariables.length==this.variables.length?($("#selectAll").prop("indeterminate",!1),this.selectAllVariables=!0):($("#selectAll").prop("indeterminate",!1),this.selectAllVariables=!1)},download:function(){if(this.error=null,this.model.stationId&&this.model.beginDate&&this.model.endDate&&this.model.downloadFormat&&this.model.selectedVariables.length>0){const n=moment(this.model.beginDate,Core.DATETIME_FORMAT),t=moment(this.model.endDate,Core.DATETIME_FORMAT);if(t.isBefore(n,"day"))this.error="The begin date is later than the end date";else if(moment.duration(t.diff(n)).asDays()>31)this.error="You have selected more that 31 days";else{const n={id:this.model.stationId,beginDate:this.model.beginDate,endDate:this.model.endDate,downloadFormat:this.model.downloadFormat,variables:this.model.selectedVariables};window.location="/Data/MeteorologicalDownload?"+new URLSearchParams(n).toString()}}else this.error="Please select a station, begin date, end date, download format, and variable"}}});